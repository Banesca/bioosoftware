(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{cAcB:function(l,n,t){"use strict";t.r(n);var e=t("8Y7J");class u{}var o=t("pMnS"),i=t("s7LF"),r=t("SVse"),a=t("iAfa"),s=t("Wiza"),d=t("mrSG");class c{constructor(){this.passEntry=new e.EventEmitter}ngOnInit(){}selectBranch(l,n){localStorage.setItem("idBranchFk",""+l),localStorage.setItem("nameSucursal",n),this.passEntry.emit(!0)}}var p=t("AytR");class m{constructor(l,n,t,e,u){this.formBuilder=l,this.authService=n,this.modalService=t,this.router=e,this._sweetAlertsService=u,this.inputPin=!1,this.hideInputsPin=!0,this.messageError=null,this.messageSuccess=null,this.idRestaurant=null,this.branch=[],this.loading=!1,this.customerList=[],this.version="V: 4.1.97"}handleKeyboardEvent(l){switch(l.keyCode){case 13:l.preventDefault()}}ngOnInit(){this.form=this.getFormBuilder(),this.path=window.location.hash.split("#/")[1];window.location.hash;"home"==this.path?window.location.href="https://menusoftware.info/":(localStorage.setItem("pathUrl",this.path),this.getAllCustomerList())}getFormBuilder(){return this.formBuilder.group({password:["",[i.B.required]]})}get f(){return this.form.controls}getAllCustomerList(){this.authService.getAllCustomer(this.path).subscribe(l=>{const n=l.restaurante,t=p.a.apiHost;n.api_port;p.a.apiHost=t.split(":")[2]?t.replace(t.split(":")[2],n.api_port):t+":"+n.api_port,p.a.idRestaurant=n.socket_room,localStorage.setItem("portURl",n.api_port),localStorage.setItem("socketUrl",n.socket_room),localStorage.setItem("idRestaurantFk",n.socket_room)},l=>{let n;n="404"==l.status?"El comercio no es correcto.":`No se ha podido autenticar, ocurri\xf3 un error. CODE: (${l.status})`,this.hideInputsPin=!1,this._sweetAlertsService.alertoastMoreTime(n,"error"),this.messageError=n})}inputPinForm(){const l={serial:this.form.value.serial,ip:null};this.loading=!0,this.authService.validatorSerial(l).subscribe(l=>{l?"ok"==l.status&&(this.messageError=null,this.inputPin=!0,this.idRestaurant=l.data.idRestaurant,this.branch=l.data.branch,this.loading=!1):(this.messageError="Serial incorrecto",this.loading=!1)},l=>{this.loading=!1})}selectBranch(l){return new Promise(l=>{this.modalRef.componentInstance.passEntry.subscribe(n=>{l(n)})})}openModal(){return d.a(this,void 0,void 0,(function*(){let l=null;if(this.modalRef=this.modalService.open(c,{backdrop:"static"}),this.modalRef.componentInstance.branch=this.branch,l=yield this.selectBranch(this.modalRef),l){this.authService.getEnvironmentsBySucursal(localStorage.getItem("idBranchFk")).subscribe(l=>{l.data?localStorage.setItem("idEnvironmentDefault",l.data[0].idEnvironment):localStorage.setItem("idEnvironmentDefault","")}),this.form.reset(),this.modalRef.close();const l="/admin/mesas/pedidos";this.router.navigate([l]),this.messageSuccess="Inicio de sesi\xf3n satisfactorio"}}))}submit(l){const n=this.f.password.value;if(0==n.trim().length)return void(this.messageError="Debe ingresar una contrase\xf1a/pin.");this.loading=!0;const t={pin:n,restaurant:p.a.idRestaurant};this.authService.validatorPin(t).subscribe(l=>{l?"ok"==l.status&&(this.messageError=null,localStorage.setItem("access_token",l.data[0].token),localStorage.setItem("idUser",l.data[0].idUser),localStorage.setItem("fullname",l.data[0].fullname),localStorage.setItem("mail",l.data[0].mail),localStorage.setItem("idProfile",l.data[0].idProfileFk),localStorage.setItem("nameProfile",l.data[0].nameProfile),this.branch=l.data[0].branch,this.openModal(),this.loading=!1):(this.messageError="Pin incorrecto",this.loading=!1)},l=>{0==l.status&&(this._sweetAlertsService.alertoastMoreTime("Comercio no configurado","error"),this.messageError="Comercio no configurado",this.hideInputsPin=!1),this.loading=!1})}}var g=t("lGQG"),h=t("G0yt"),f=t("iInd"),v=t("HHVr"),b=[[".h-100vh[_ngcontent-%COMP%]{height:100vh}.background-1[_ngcontent-%COMP%]{background-image:url(background_1.5dff9d8edee41d3992f2.jpg);background-size:100%;background-repeat:no-repeat;background-position:center;background-color:#000}.login-input[_ngcontent-%COMP%]{width:100%;height:50px;background-color:transparent;border:none;color:#fff;border-top:1px solid #fff;border-bottom:1px solid #fff;font-weight:700;font-size:30px}.login-card[_ngcontent-%COMP%]{padding:10px;border-radius:10%}.login-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin:10% 0}.login-card-body[_ngcontent-%COMP%]{border-radius:10%;padding:20% 10%}.pin-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center}.pin-wrapper[_ngcontent-%COMP%]   .border-pin[_ngcontent-%COMP%]{border-radius:6px;border:1px solid #fff;margin:0 5px;padding:5px}.pin-wrapper[_ngcontent-%COMP%]   .border-pin[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:44px;border:1px solid #d7d7d7;border-radius:6px;outline:0;text-align:center;background:#eee;font-size:20px}@media screen and (max-width:479px){.background-1[_ngcontent-%COMP%]{background-image:url(background_1.5dff9d8edee41d3992f2.jpg)!important;background-repeat:no-repeat!important;background-position:center!important;background-color:#000!important;background-size:auto!important}}.loginButton[_ngcontent-%COMP%]{color:#fff;background:#010d3a;border-color:#fc004f;padding:6px;margin:16px 0}"]],C=e["\u0275crt"]({encapsulation:0,styles:b,data:{}});function w(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,6,"div",[["class","d-flex"]],null,null,null,null,null)),(l()(),e["\u0275eld"](1,0,null,null,5,"input",[["class","form-control"],["formControlName","password"],["placeholder","Clave secreta unica"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keydown.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,t){var u=!0,o=l.component;"input"===n&&(u=!1!==e["\u0275nov"](l,2)._handleInput(t.target.value)&&u);"blur"===n&&(u=!1!==e["\u0275nov"](l,2).onTouched()&&u);"compositionstart"===n&&(u=!1!==e["\u0275nov"](l,2)._compositionStart()&&u);"compositionend"===n&&(u=!1!==e["\u0275nov"](l,2)._compositionEnd(t.target.value)&&u);"keydown.enter"===n&&(u=!1!==o.submit()&&u);return u}),null,null)),e["\u0275did"](2,16384,null,0,i.d,[e.Renderer2,e.ElementRef,[2,i.a]],null,null),e["\u0275prd"](1024,null,i.o,(function(l){return[l]}),[i.d]),e["\u0275did"](4,671744,null,0,i.i,[[3,i.c],[8,null],[8,null],[6,i.o],[2,i.E]],{name:[0,"name"]},null),e["\u0275prd"](2048,null,i.p,null,[i.i]),e["\u0275did"](6,16384,null,0,i.q,[[4,i.p]],null,null)],(function(l,n){l(n,4,0,"password")}),(function(l,n){l(n,1,0,e["\u0275nov"](n,6).ngClassUntouched,e["\u0275nov"](n,6).ngClassTouched,e["\u0275nov"](n,6).ngClassPristine,e["\u0275nov"](n,6).ngClassDirty,e["\u0275nov"](n,6).ngClassValid,e["\u0275nov"](n,6).ngClassInvalid,e["\u0275nov"](n,6).ngClassPending)}))}function k(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,2,"div",[["class","error-msg"]],null,null,null,null,null)),(l()(),e["\u0275eld"](1,0,null,null,0,"i",[["class","fa fa-times-circle"]],null,null,null,null,null)),(l()(),e["\u0275ted"](2,null,[" "," "]))],null,(function(l,n){l(n,2,0,n.component.messageError)}))}function _(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,2,"div",[["class","success-msg"]],null,null,null,null,null)),(l()(),e["\u0275eld"](1,0,null,null,0,"i",[["class","fa fa-times-circle"]],null,null,null,null,null)),(l()(),e["\u0275ted"](2,null,[" "," "]))],null,(function(l,n){l(n,2,0,n.component.messageSuccess)}))}function x(l){return e["\u0275vid"](0,[e["\u0275qud"](402653184,1,{formElement:0}),(l()(),e["\u0275eld"](1,0,null,null,27,"div",[["class","background-1"]],null,null,null,null,null)),(l()(),e["\u0275eld"](2,0,null,null,26,"div",[["class","container-fluid"]],null,null,null,null,null)),(l()(),e["\u0275eld"](3,0,null,null,25,"div",[["class","row h-100vh align-items-center justify-content-sm-center"]],null,null,null,null,null)),(l()(),e["\u0275eld"](4,0,null,null,24,"div",[["class","col-sm-6 col-md-4"]],null,null,null,null,null)),(l()(),e["\u0275eld"](5,0,null,null,23,"div",[["class","login-card"]],null,null,null,null,null)),(l()(),e["\u0275eld"](6,0,null,null,22,"div",[["class","login-card-body"]],null,null,null,null,null)),(l()(),e["\u0275eld"](7,0,null,null,1,"div",[["class","text-center"]],null,null,null,null,null)),(l()(),e["\u0275eld"](8,0,null,null,0,"img",[["class","w-50"],["src","../assets/biorestaurant/LOGO/LOGO_MENU_DELIVERY_Mesa_de_trabajo_1-min.png"]],null,null,null,null,null)),(l()(),e["\u0275eld"](9,0,null,null,1,"h4",[["class","text-center"],["style","text-transform: uppercase"]],null,null,null,null,null)),(l()(),e["\u0275ted"](10,null,[" "," "])),(l()(),e["\u0275eld"](11,0,[[1,0],["formElement",1]],null,17,"form",[["class","form-signin"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(l,n,t){var u=!0;"submit"===n&&(u=!1!==e["\u0275nov"](l,13).onSubmit(t)&&u);"reset"===n&&(u=!1!==e["\u0275nov"](l,13).onReset()&&u);return u}),null,null)),e["\u0275did"](12,16384,null,0,i.G,[],null,null),e["\u0275did"](13,540672,null,0,i.k,[[8,null],[8,null]],{form:[0,"form"]},null),e["\u0275prd"](2048,null,i.c,null,[i.k]),e["\u0275did"](15,16384,null,0,i.r,[[4,i.c]],null,null),(l()(),e["\u0275and"](16777216,null,null,1,null,w)),e["\u0275did"](17,16384,null,0,r.o,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),e["\u0275eld"](18,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(l()(),e["\u0275eld"](19,0,null,null,2,"div",[["class","pin-wrapper"]],null,null,null,null,null)),(l()(),e["\u0275eld"](20,0,null,null,1,"button",[["class","btn w-100 loginButton"],["type","button"]],null,[[null,"click"]],(function(l,n,t){var e=!0,u=l.component;"click"===n&&(e=!1!==u.submit()&&e);return e}),null,null)),(l()(),e["\u0275ted"](-1,null,[" Ingresar "])),(l()(),e["\u0275eld"](22,0,null,null,2,"div",[["class","h-100 d-flex align-center"]],null,null,null,null,null)),(l()(),e["\u0275eld"](23,0,null,null,1,"div",[["style","color: white"]],null,null,null,null,null)),(l()(),e["\u0275ted"](24,null,["",""])),(l()(),e["\u0275and"](16777216,null,null,1,null,k)),e["\u0275did"](26,16384,null,0,r.o,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),e["\u0275and"](16777216,null,null,1,null,_)),e["\u0275did"](28,16384,null,0,r.o,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),e["\u0275eld"](29,0,null,null,2,"ngx-loading",[],null,null,null,a.b,a.a)),e["\u0275did"](30,114688,null,0,s.a,[s.c,e.ChangeDetectorRef],{show:[0,"show"],config:[1,"config"]},null),e["\u0275pod"](31,{backdropBorderRadius:0})],(function(l,n){var t=n.component;l(n,13,0,t.form),l(n,17,0,0!=t.hideInputsPin),l(n,26,0,t.messageError),l(n,28,0,t.messageSuccess);var e=t.loading,u=l(n,31,0,"3px");l(n,30,0,e,u)}),(function(l,n){var t=n.component;l(n,10,0,t.path),l(n,11,0,e["\u0275nov"](n,15).ngClassUntouched,e["\u0275nov"](n,15).ngClassTouched,e["\u0275nov"](n,15).ngClassPristine,e["\u0275nov"](n,15).ngClassDirty,e["\u0275nov"](n,15).ngClassValid,e["\u0275nov"](n,15).ngClassInvalid,e["\u0275nov"](n,15).ngClassPending),l(n,24,0,t.version)}))}var P=e["\u0275ccf"]("app-login",m,(function(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,1,"app-login",[],null,[["document","keydown"]],(function(l,n,t){var u=!0;"document:keydown"===n&&(u=!1!==e["\u0275nov"](l,1).handleKeyboardEvent(t)&&u);return u}),x,C)),e["\u0275did"](1,114688,null,0,m,[i.f,g.a,h.G,f.k,v.a],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),y=t("9AJC"),I=[[".main[_ngcontent-%COMP%]{display:flex;height:92.5%}.mainInner[_ngcontent-%COMP%]{height:500px;width:100%;text-align:center;background-color:transparent!important}.branchs-modal[_ngcontent-%COMP%]{text-align:center;font-size:14px;font-family:Arial,sans-serif;font-weight:700;height:36px;padding:0 8px;background:#fff!important}.branchsmodal-container[_ngcontent-%COMP%]{padding:30px;max-width:350px;width:100%!important;margin:0 auto;border-radius:2px;overflow:hidden;background:#fff!important}.branchsmodal-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;font-size:1.8em}.list-item[_ngcontent-%COMP%]{display:flex;width:100%;height:50px;border-radius:10px;background-color:#f7f7f7;cursor:pointer}.list-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:100%}.list-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-align:center;margin:0;color:#000;font-size:100%}"]],S=e["\u0275crt"]({encapsulation:0,styles:I,data:{}});function O(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,5,"div",[["class","list-item mb-4"]],null,[[null,"click"]],(function(l,n,t){var e=!0,u=l.component;"click"===n&&(e=!1!==u.selectBranch(l.context.$implicit.idSucursal,l.context.$implicit.nombre)&&e);return e}),null,null)),(l()(),e["\u0275eld"](1,0,null,null,4,"div",[["class","title"]],null,null,null,null,null)),(l()(),e["\u0275eld"](2,0,null,null,3,"div",[["class","container-fluid"]],null,null,null,null,null)),(l()(),e["\u0275eld"](3,0,null,null,2,"div",[["class","row align-items-center d-flex justify-content-start px-3"],["style","height: 50px;"]],null,null,null,null,null)),(l()(),e["\u0275eld"](4,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),e["\u0275ted"](5,null,["",""]))],null,(function(l,n){l(n,5,0,n.context.$implicit.nombre)}))}function M(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,9,"div",[["class","branchsmodal-container"]],null,null,null,null,null)),(l()(),e["\u0275eld"](1,0,null,null,1,"h1",[],null,null,null,null,null)),(l()(),e["\u0275ted"](-1,null,["Seleccione la sucursal"])),(l()(),e["\u0275eld"](3,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e["\u0275eld"](4,0,null,null,5,"div",[["class","main center"]],null,null,null,null,null)),(l()(),e["\u0275eld"](5,0,null,null,4,"div",[["class","body-container"]],null,null,null,null,null)),(l()(),e["\u0275eld"](6,0,null,null,3,"div",[["class","mainInner scrollbar style-scrollbar"]],null,null,null,null,null)),(l()(),e["\u0275eld"](7,0,null,null,2,"div",[["class","p-4"]],null,null,null,null,null)),(l()(),e["\u0275and"](16777216,null,null,1,null,O)),e["\u0275did"](9,278528,null,0,r.n,[e.ViewContainerRef,e.TemplateRef,e.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,9,0,n.component.branch)}),null)}var E=e["\u0275ccf"]("app-branch-list",c,(function(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,1,"app-branch-list",[],null,null,null,M,S)),e["\u0275did"](1,114688,null,0,c,[],null,null)],(function(l,n){l(n,1,0)}),null)}),{branch:"branch"},{passEntry:"passEntry"},[]);class R{}t.d(n,"AuthModuleNgFactory",(function(){return B}));var B=e["\u0275cmf"](u,[],(function(l){return e["\u0275mod"]([e["\u0275mpd"](512,e.ComponentFactoryResolver,e["\u0275CodegenComponentFactoryResolver"],[[8,[o.a,P,y.a,y.b,y.h,y.i,y.e,y.f,y.g,E]],[3,e.ComponentFactoryResolver],e.NgModuleRef]),e["\u0275mpd"](4608,r.q,r.p,[e.LOCALE_ID,[2,r.O]]),e["\u0275mpd"](4608,i.D,i.D,[]),e["\u0275mpd"](4608,i.f,i.f,[]),e["\u0275mpd"](4608,h.G,h.G,[e.ComponentFactoryResolver,e.Injector,h.vb,h.H]),e["\u0275mpd"](1073742336,r.c,r.c,[]),e["\u0275mpd"](1073742336,f.o,f.o,[[2,f.t],[2,f.k]]),e["\u0275mpd"](1073742336,R,R,[]),e["\u0275mpd"](1073742336,i.C,i.C,[]),e["\u0275mpd"](1073742336,i.m,i.m,[]),e["\u0275mpd"](1073742336,i.y,i.y,[]),e["\u0275mpd"](1073742336,h.c,h.c,[]),e["\u0275mpd"](1073742336,h.g,h.g,[]),e["\u0275mpd"](1073742336,h.h,h.h,[]),e["\u0275mpd"](1073742336,h.l,h.l,[]),e["\u0275mpd"](1073742336,h.m,h.m,[]),e["\u0275mpd"](1073742336,h.u,h.u,[]),e["\u0275mpd"](1073742336,h.B,h.B,[]),e["\u0275mpd"](1073742336,h.I,h.I,[]),e["\u0275mpd"](1073742336,h.K,h.K,[]),e["\u0275mpd"](1073742336,h.P,h.P,[]),e["\u0275mpd"](1073742336,h.S,h.S,[]),e["\u0275mpd"](1073742336,h.V,h.V,[]),e["\u0275mpd"](1073742336,h.Y,h.Y,[]),e["\u0275mpd"](1073742336,h.bb,h.bb,[]),e["\u0275mpd"](1073742336,h.gb,h.gb,[]),e["\u0275mpd"](1073742336,h.jb,h.jb,[]),e["\u0275mpd"](1073742336,h.kb,h.kb,[]),e["\u0275mpd"](1073742336,h.lb,h.lb,[]),e["\u0275mpd"](1073742336,h.J,h.J,[]),e["\u0275mpd"](1073742336,s.b,s.b,[]),e["\u0275mpd"](1073742336,u,u,[]),e["\u0275mpd"](1024,f.i,(function(){return[[{path:"",component:m}]]}),[]),e["\u0275mpd"](256,"loadingConfig",{},[])])}))}}]);